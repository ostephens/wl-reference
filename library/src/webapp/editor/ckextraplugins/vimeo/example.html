<html>
  <head>
    <meta charset="utf-8">
    <title>CKEditor Vimeo Search Plugin Example</title>
    <script src="../../ckeditor/ckeditor.js"></script>

      <script>

     function getCurrentDirectory() {
           var scripts = document.getElementsByTagName("script");
           var src = scripts[scripts.length-1].baseURI.split('/');
          src.pop(); // remove example.html
          src.pop(); // remove vimeo
          src = src.join('/');
          return src;
     }
     function createEditor(id, config, html) {
        editor = CKEDITOR.appendTo( id, config, html );
        editor.config.allowedContent = true;
        config.forEach(function(item) {
            CKEDITOR.plugins.addExternal(item.id, item.dir + '/'+ item.id+ '/', 'plugin.js');
            editor.config.extraPlugins += item.id+',';
        });
      }
      function removeEditor() {
        if (!editor) {
          return;
        }
        document.getElementById('editorcontents').innerHTML = html = editor.getData();
        document.getElementById('contents').style.display = '';
        editor.destroy();
        editor = null;
      }
    </script>
    <link rel="stylesheet" href="../lib/ckeditor/samples/sample.css">
  </head>
  <body>
    <h1 class="samples">CKEditor Vimeo Search Plugin Example</h1>
    <p>
      <input onclick="createEditor('editor', [ { id: 'vimeo', dir: getCurrentDirectory() }, { id: 'jquery-1.11.1', dir: getCurrentDirectory() } ]);" type="button" value="Create Editor">
      <input onclick="removeEditor();" type="button" value="Remove Editor">
    </p>
    <div id="editor">
    </div>
    <div id="contents" style="display: none">
      <p>Edited Contents:</p>
      <div id="editorcontents"></div>
    </div>
    <div id="footer">
      <hr>
      <p> CKEditor - The text editor for the Internet - <a class="samples" href="http://ckeditor.com/">http://ckeditor.com</a></p>
      <p id="copy">All rights reserved. File adapted from ajax.html example from CKEditor site.</p>
    </div>
  </body>
</html>
